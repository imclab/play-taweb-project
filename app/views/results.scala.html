@(city : models.beans.City, arrivalDate : Date, weatherDataList: List[WeatherData], rate : String, GMAPIKEY : String)

@main("Search Result", scripts)(subtitle)(content)

@scripts = {
			<!--*{<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=@{GMAPIKEY}&sensor=false"></script>}*-->
			<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=en"></script>
			<script src='@routes.Assets.at("javascripts/vendor/gmap3.min.js")'></script>
}

@subtitle = {
			<h1><a>Get information with us !</a></h1>
			<p>This space will allow you to gather information about your destination places. So start your search now !</p>
}

@content = {
            <section class='row featured-items'>
                <section class='span9'>
                <div class='row'>
                    <div class='span9'>
                        <div class='top-bar'>
                            <div class='bar-title'>
                                <div class='inner'>
                                    <div class='pull-left custom-margin'>
                                        <h2><strong>Description</strong></h2>
                                    </div>
                                    <div class='pull-right results-per-page custom-margin'>
                                        <ul>
                                        	@if(city.getName().isEmpty() && city.getCountry.isEmpty()){
                                        		<strong>The city</strong> on <strong>@arrivalDate.date.format("dd MMMM yyyy")</strong>
                                        	}
                                            @if(!city.getName().isEmpty() && !city.getCountry.isEmpty()){
                                            	<strong>@city.getName(), @city.getCountry()</strong> on <strong>@arrivalDate.date.format("dd MMMM yyyy")</strong>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class='bar-bottom'>
                                <div class='inner'>
                                    <div class='pull-left custom-margin'>
                                        <p>@city.getOverview()</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <div class='location-finder'>
                        <div class='left-side'>
                        	@if(!weatherDataList.isEmpty()) {
                            	@for((wd,index) <- weatherDataList.zipWithIndex){
	                                <article rel='@index'>
	                                    <figure>
	                                        <img src="http://openweathermap.org/img/w/@{wd.icon}.png" alt="@wd.description">
	                                    </figure>
	                                    <div class='text'>
	                                        <h3>@wd.description</h3>
	                                        <p>@wd.date.format("dd/MM/yyyy hh:mm")</p>
	                                        <span class='price'>@wd.temperature &deg;C</span>
	                                    </div>
	                                </article>
                            	}
                            }
                            @if(weatherDataList.isEmpty()) {
							        No weather information!
							}
                        </div>
                        <div class='right-side'>
                            <a href="#" class='button-slider expanded'> </a>
                            <div id="map_canvas"> </div>
                        </div>
                    </div>
                </section>
                <aside class='span3'>
                    <section class='widget'>
                        <section class='widget-title uppercase'>
                            <div class='inner'>
                                    <div class='pull-left custom-margin' style="margin-top: 2px;margin-bottom: 13px;">
                                        <h2><strong>Recommandation</strong></h2>
                                    </div>                               	
                            </div>
                        </section>
                        <section class='widget-content'>
                            <form action="">
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Location</label>
                                        <p><strong>@city.getName(), @city.getCountry()</strong></p>
                                    </div>
                                </div>
                                
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Currency</label>
                                        <p>@city.getCurrencyCode</p>
                                        <p>Rate: @rate</p>
                                    </div>
                                </div>
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Hotels</label>
                                        
                                    </div>
                                </div>
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Shops</label>
                                    </div>
                                </div>
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Bars</label>
                                    </div>
                                </div>
                                <div class='widget-section'>
                                    <div class='inner' style='position: relative;'>
                                        <label for="category">Top Restaurant</label>
                                    </div>
                                </div>
                                <div class='widget-section'>
                                    <div class='inner'>
                                        <label for="category">Top Research for this city</label>
                                    </div>
                                </div>
                            </form>
                        </section>
                    </section>
                </aside>
            </section>   
        <script type="text/javascript">
            jQuery(document).ready(function() {
            	
            	var mapLatLng = new google.maps.LatLng(@city.getLatitude(), @city.getLongitude());
            	
                $('#map_canvas').gmap3({
					 map:{
					     options:{
					     		center: mapLatLng,
					     		zoom: 9,
					     		mapTypeId: google.maps.MapTypeId.TERRAIN
					     }
					 },
					 marker:{
					 		title:'salut',
					    	latLng: mapLatLng,
					    	/* or address: "Calle 9 numero 330ALT e/ D y Oriente",*/
					    	options:{
                                    draggable: false
                            },
						    events:{
                                    mouseover: function(marker, event, context){
                                        var map = $(this).gmap3("get"),infowindow = $(this).gmap3({get:{name:"infowindow"}});
                                        
                                        if (infowindow){
                                            infowindow.open(map, marker);
                                            infowindow.setContent("<div><a target='_black' href='http://www.montpellier.fr/'>http://www.montpellier.fr/</a></div>");
                                        } else {
                                            $(this).gmap3({
                                                infowindow:{
                                                    anchor:marker,
                                                    options:{content: "<div><a target='_black' href='http://www.montpellier.fr/'>http://www.montpellier.fr/</a></div>"}
                                                }
                                            });
                                        }
                                    }
						    }					    	
					}					
				});
			});
        </script>    
}